2019.12.2
---------------------------------------------------------------

合并GitHub多次修改，避免历史记录过多

[![](https://ae01.alicdn.com/kf/Hfe816e6b2be942ccb5fdcb30cc94cbe8Z.png)](https://ae01.alicdn.com/kf/Hfe816e6b2be942ccb5fdcb30cc94cbe8Z.png)

1. 进入目录下，点击右键：<br/>[![](https://ae01.alicdn.com/kf/H468a7b55a01e4ec5933af9eefdd099d2O.jpg)](https://ae01.alicdn.com/kf/H468a7b55a01e4ec5933af9eefdd099d2O.jpg)
2. 进入日志模式后，对前几次修改的历史处点击右键<br/>[![](https://ae01.alicdn.com/kf/Hbdbf1795f4544061bdcd1f4ee05190f7P.png)](https://ae01.alicdn.com/kf/Hbdbf1795f4544061bdcd1f4ee05190f7P.png)
3. 选择混合重置<br/>[![](https://ae01.alicdn.com/kf/Hf75400a7c4b9474bb9bd58e56a404013m.png)](https://ae01.alicdn.com/kf/Hf75400a7c4b9474bb9bd58e56a404013m.png)
4. 回到目录下，右键 切换/检出<br/>[![](https://ae01.alicdn.com/kf/H7828aab6293d412d8dd0c1e6ceb25e2fB.jpg)](https://ae01.alicdn.com/kf/H7828aab6293d412d8dd0c1e6ceb25e2fB.jpg)
5. 选择切换到master分支<br/>[![](https://ae01.alicdn.com/kf/H0e2c6b1298e14e2c83b974c4e80159feX.jpg)](https://ae01.alicdn.com/kf/H0e2c6b1298e14e2c83b974c4e80159feX.jpg)
6. 回到目录点击右键，提交（但不推送）<br/>[![](https://ae01.alicdn.com/kf/Ha26d765aa9c24bee9d53b816f107aec6K.png)](https://ae01.alicdn.com/kf/Ha26d765aa9c24bee9d53b816f107aec6K.png)
<br/>
   [![](https://ae01.alicdn.com/kf/H02ce9fedf9ef4141ae1875afd799f7e9T.png)](https://ae01.alicdn.com/kf/H02ce9fedf9ef4141ae1875afd799f7e9T.png)
7. 右键推送<br/>[![](https://ae01.alicdn.com/kf/H7b7ac6e90c114cd09866f8b4a2360692W.png)](https://ae01.alicdn.com/kf/H7b7ac6e90c114cd09866f8b4a2360692W.png)

8. 最后的结果<br/>[![](https://ae01.alicdn.com/kf/H609b2f1486994fac933b5d7c4ef60f4bv.png)](https://ae01.alicdn.com/kf/H609b2f1486994fac933b5d7c4ef60f4bv.png)



2019.12.10
---------------------------------------------------------------------

1. 合并封装文件

   在当前目录下，命令行`ar crsT libnew.dll.a libopencv_core400.dll.a libopencv_imgproc400.dll.a`（libopencv_core400.dll.a和libopencv_imgproc400.dll.a是已经有的）和`ar crsT libnew.dll libopencv_core400.dll libopencv_imgproc400.dll` （libopencv_core400.dll和libopencv_imgproc400.dll是已经有的） ，得到新的文件libnew.dll.a和libnew.dll

2. 应用新的链接文件

   ```cmake
   cmake_minimum_required(VERSION 3.13)
   project(test)
   
   set(CMAKE_CXX_STANDARD 11)
   
   file(GLOB SOURCE_FILES "*.h" "*.cpp" "*.c" "*.hpp")
   
   include_directories("D:/build/install/include")
   
   add_executable(${PROJECT_NAME} ${SOURCE_FILES} )
   find_library(MODULES_LIBRARY
           NAMES new
           PATH_SUFFIXES lib
           PATHS "D:\\build\\lib" "D:\\build\\bin")
   # path 分别是libnew.dll.a和libnew.dll所在目录，NAMES写上链接名new（文件名除去后缀和开头，就是名lib）
   target_link_libraries(${PROJECT_NAME} ${MODULES_LIBRARY})
   ```

2020.1.15
---------------------------------------------------------------

链接使用静态还是动态链接对生成程序的运行有影响，动态库的程序运行前必须带库复制，静态库的程序运行是独立的。语法是

`gcc -static -fPIC -o 静态库文件名 源文件(包含库，必须是静态) `意思是强制生成静态库，注意动态**不能**生成静态库；

`gcc -shared -fPIC -o 动态库文件名 源文件(包含库，静态/动态)`意思是尽量生成动态库。

 C/C++编译过程是分为四个阶段进行的，即预处理(也称预编译，Preprocessing)、编译(Compilation)、汇编 (Assembly)和连接(Linking)。 

> #### 编译为汇编代码(Compilation)
>
> `gcc -S test.i -o test.s` gcc的-S选项，表示在程序编译期间，在生成汇编代码后，停止，-o输出汇编代码文件。 
>
> #### 汇编(Assembly)
>
> `gcc -c test.s -o test.o`
>
> #### 连接(Linking)
>
> `gcc test.o -o test` 负责将程序的目标文件与所需的所有附加的目标文件连接起来，最终生成可执行文件。附加的目标文件包括静态连接库和动态连接库。 
>
> #### 从目标文件生成链接库
>
> `ar -crs lib____.a  ....o ....o`-c含义是创建，-r含义是打包，-s含义是符号链接
>
> #### OpenCV编译参数
>
> ```bash
> g++ main.cpp -o test -std=c++11 `pkg-config --cflags --libs gtk+-2.0 opencv4`
> ```

2020.1.16
----------------------------------------------------------------------------

交叉编译安装路径配置

`./configure`查看所安装包的配置需要。如果配置文件说明过于简单，则需要`AR=....  CC=.... ./configure`AR和CC分别写交叉编译器的完整路径。(aarch64-linux-gnu-gcc,aarch64-linux-gnu-ar)

./configure常见的参数说明：

`--prefix=/...`安装目录，需要有写权限。

`--host=aarch64-linux-gnu`运行程序目标机，编译器的前缀去“-”

`--cross-prefix=aarch64-linux-gnu-`

依赖库配置参数：

`--extra...`如`--extra-cflags="-I..."`或者`--extra-ldflags="-L... -l..."`或者`--extra-libs="-l... -l... "`

编译库的可选参数

`--enable-shared`和`--enable-static`

编译设置完后需要开始编译和生成库

`make && make install`

如果编译遇到报错，则需要提升管理员权限，`sudo env PATH=$PATH make install`

如果想直接用`sudo make install`需要`alias sudo = “sudo env PATH=$PATH”`，传参如果带有空格，需要\⎵ 。