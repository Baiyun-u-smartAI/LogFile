2019.10.10
----------------------------------------------------
<font size=5>

C/C++安装<font color=#0000FF>xege.com</font>库
<br/>
<br/>
- 添加 <u>/ege</u>和<u>ege.h</u>和<u>graphics.h</u> 到 <b>D:\mingw-w64\x86_64-8.1.0-posix-seh-rt_v6-rev0\mingw64\lib\gcc\x86_64-w64-mingw32\8.1.0\include</b>

- 添加动态链接文件<u>libgraphics64.a</u> 到 <b>D:\mingw-w64\x86_64-8.1.0-posix-seh-rt_v6-rev0\mingw64\lib</b>

- 单独cmd运行指令 :point_right: `g++ main.cpp -lgraphics64 -lgdi32 -limm32 -lmsimg32 -lole32 -loleaut32 -lwinmm -luuid -mwindows`

- CLion运行时需要的CMakeLists.txt如下

  ```cmake
  cmake_minimum_required(VERSION 3.13)
  project(C10)

  # alternative set C++ path
  # REPLACE WITH your installed binary path of MingW64

  # use C++ VERSION
  set(CMAKE_CXX_STANDARD 11)
  #set(CMAKE_CXX_FLAGS "-lgraphics64 -lgdi32 -limm32 -lmsimg32 -lole32 -loleaut32 -lwinmm -luuid -mwindows")

  # to run C++ program with all SOURCE_FILES in the directory

  file(GLOB SOURCE_FILES  "*.h" "*.cpp" "*.c" "*.hpp")

  link_directories("D:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\lib")
  add_executable(C10 ${SOURCE_FILES})
  # add libs you need
  

  # linking

  target_link_libraries(C10 graphics64 gdi32 imm32 msimg32 ole32 oleaut32 winmm uuid)
  ```


如何创建onedrive网盘的直链
- 登录 https://us.flow.microsoft.com
- 创建新的流
  ![](https://ae01.alicdn.com/kf/H7a8c032b481d47e9aa2d4aa30fb053427.png)
  ![](https://ae01.alicdn.com/kf/Hf08bd2cdeb15431bafbedd2c85154f18D.png)
  ![](https://ae01.alicdn.com/kf/H30c891b85d064f89b80a2de59e145869h.png)
  ![](https://ae01.alicdn.com/kf/He0eca6e3438c4bb6873b317facf733aba.png)
- 设置流
  ![](https://ae01.alicdn.com/kf/H9d5c1232707645b18450199331918b454.png)
  ![](https://ae01.alicdn.com/kf/H71ad35eb6c15461b997c9147d3353ef2K.png)
  ![](https://ae01.alicdn.com/kf/H0acab302feb34f0ab26ecaa9953e5271F.png)
  ![](https://ae01.alicdn.com/kf/H44ebbed6b7a5448aae77c723308609a8H.png)



</font>

2019.11.29
----------------------------------------------------

<font size=5>

配置OpenCV+QT+CLion

1. 环境变量设置，需删除所有与QT和MingW有关的环境变量，并添加以下三项

<img src="https://puui.qpic.cn/fans_admin/0/3_1452561028_1575043392669/0" style="zoom:150%;" />

2. 编辑CMakeLists文件
    ```cmake
    cmake_minimum_required(VERSION 3.5)

    project(qtprojects)
    set(CMAKE_CXX_STANDARD 11)
    set(CMAKE_CXX_STANDARD_REQUIRED ON)
    set(CMAKE_INCLUDE_CURRENT_DIR ON)

    set(CMAKE_PREFIX_PATH "D:\\Qt\\Qt5.13.2\\5.13.2\\mingw73_64")
    set(QT_QMAKE_EXECUTABLE "D:\\Qt\\Qt5.13.2\\5.13.2\\mingw73_64\\bin\\qmake.exe")
    set(OpenCV_DIR D:/Qt/Qt5.13.2/OpenCV412Lib/build/install)
    set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/")
    find_package(Qt5 COMPONENTS Widgets DataVisualization Core OpenGL REQUIRED)

    include_directories(${Qt5Widgets_INCLUDE_DIRS})
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${Qt5Widgets_EXECUTABLE_COMPILE_FLAGS}")

    find_package(OpenCV REQUIRED)
    include_directories(${OpenCV_INCLUDE_DIRS})
    add_executable(qtprojects main.cpp PredictCard.h)
    set(OpenCV_LIBS ${OpenCV_LIBS})
    target_link_libraries(qtprojects PRIVATE Qt5::Core
            Qt5::DataVisualization Qt5::OpenGL
            Qt5::Gui Qt5::Widgets ${OpenCV_LIBS} )
    
    ```






</font>

2019.11.30
----------------------------------------------------

利用CMakeLists 创建静态链接和动态链接<br/>
1. 在工程里面需要准备的文件有
    | <span style="font-weight:normal">├──ProjectName </span>      | <span style="font-weight:normal">//工程总目录 </span> |
    | :----------------------------------------------------------- | :---------------------------------------------------- |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="red">CMakeList.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> | //配置CMake文件                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="blue">main.cpp</font> | //包含有main函数的c++源文件                           |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="blue">test_1st.h</font> | //用于include封装静态链接文 //件的头文件              |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="green">test_1st.cpp</font> | //需封装静态链接的c++源文件                           |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="blue">test_2nd.h</font> | //用于include封装动态链接文 //件的头文件              |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="green">test_2nd.cpp</font> | //需封装动态链接的c++源文件                           |

2. 测试原工程是否能正常运行
   - 测试需要封装成静态链接的h/c++文件

   ```cmake
   project(test1st)
   set(CMAKE_CXX_STANDARD 11)
   set(SOURCE_FILES main.cpp test_1st.cpp test_1st.h)
   add_executable(${PROJECT_NAME} ${SOURCE_FILES})
   ```
   - 测试需要封装成动态态链接的h/c++文件
   ```cmake
   project(test2nd)
   set(CMAKE_CXX_STANDARD 11)
   set(SOURCE_FILES main.cpp test_2nd.cpp test_2nd.h)
   add_executable(${PROJECT_NAME} ${SOURCE_FILES})
   ```

3. 生成链接库文件
   - 生成需要封装成静态链接文件

   ```cmake
   project(test1st) # 文件名就是libtest1st.a
   set(CMAKE_CXX_STANDARD 11)
   set(SOURCE_FILES main.cpp test_1st.cpp test_1st.h)
   add_library(${PROJECT_NAME} STATIC ${SOURCE_FILES})
   ```
   - 生成需要封装成动态态链接文件
   ```cmake
   project(test2nd) # 文件名就是libtest2nd.dll
   set(CMAKE_CXX_STANDARD 11)
   set(SOURCE_FILES main.cpp test_2nd.cpp test_2nd.h)
   add_library(${PROJECT_NAME} SHARED ${SOURCE_FILES})
   ```
   
4. 调整目录结构

    | <span style="font-weight:normal">├──ProjectName </span>      | <span style="font-weight:normal">//工程总目录 </span> |
    | ------------------------------------------------------------ | ----------------------------------------------------- |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──test1st   |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="blue">test_1st.h</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="red">libtest1st.a</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="purple">FindTest1st.cmake</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | //配置CMake文件1                                      |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──test2nd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="blue">test_2nd.h</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="red">libtest2nd.dll</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="red">libtest2nd.dll.a</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="purple">FindTest2nd.cmake</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | //配置CMake文件2                                      |
    | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──main.cpp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |                                                       |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──<font color="purple">CMakeList.txt</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | //配置CMake文件3                                      |
    
5. 编写cmake文件
- FindTest1st.cmake

  ```cmake
  set(FIND_Test1st_PATHS "${CMAKE_CURRENT_LIST_DIR}/test1st")
  # 从${FIND_Test1st_PATHS}/include里面找头文件test_1st.h
  find_path(Test1st_INCLUDE_DIR test_1st.h
          PATH_SUFFIXES include
          PATHS ${FIND_Test1st_PATHS})
  # 从${FIND_Test1st_PATHS}/lib里面找静态链接库文件libtest1st.a
  find_library(Test1st_LIBRARY
          NAMES test1st
          PATH_SUFFIXES lib
          PATHS ${FIND_Test1st_PATHS})
  ```

- FindTest2nd.cmake

  ```cmake
  set(FIND_Test2nd_PATHS "${CMAKE_CURRENT_LIST_DIR}")
  # 从${FIND_Test2nd_PATHS}/include里面找头文件test_2nd.h
  find_path(Test2nd_INCLUDE_DIR test_2nd.h
          PATH_SUFFIXES include
          PATHS ${FIND_Test2nd_PATHS})
  #MESSAGE("${FIND_Test2nd_PATHS}")
  # 从${FIND_Test2nd_PATHS}/lib里面找静态链接库文件libtest2nd.dll
  find_library(Test2nd_LIBRARY
          NAMES test2nd
          PATH_SUFFIXES lib
          PATHS ${FIND_Test2nd_PATHS})
  ```

- CMakeLists.txt

  ```cmake
  cmake_minimum_required(VERSION 3.13)
  project(test) # test这个名字可以自定义
  set(CMAKE_CXX_STANDARD 11)
  # append xxx.cmake DIR
  list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}/test1st")
  list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}/test2nd")
  
  # shorten "#include ..." DIR
  set(H_FILE_INCLUDE_DIR "${CMAKE_CURRENT_LIST_DIR}/test1st/include")
  set(H_FILE_INCLUDE_DIR2 "${CMAKE_CURRENT_LIST_DIR}/test2nd/include")
  set(CMAKE_CXX_FLAGS "-I${H_FILE_INCLUDE_DIR}")
  list(APPEND CMAKE_CXX_FLAGS "-I${H_FILE_INCLUDE_DIR2}")
  # export exe file
  add_executable(${PROJECT_NAME} main.cpp)
  # maybe useless
  include(FindPkgConfig)
  
  # package name (Test1st) must be same as "Find|>Test1st<|.cmake" file
  find_package(Test1st REQUIRED)
  
  # Test1st_INCLUDE_DIR is same as variable in "FindTest1st.cmake" file
  include_directories(${Test1st_INCLUDE_DIR})
  
  # another package...
  find_package(Test2nd REQUIRED)
  include_directories(${Test2nd_INCLUDE_DIR})
  
  # Test1st_LIBRARY is same as variable in "FindTest1st.cmake" file
  # Test2nd_LIBRARY is same as variable in "FindTest2nd.cmake" file
  target_link_libraries(${PROJECT_NAME} ${Test1st_LIBRARY} ${Test2nd_LIBRARY})
  ```

  

